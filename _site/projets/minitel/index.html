<!DOCTYPE html>
<html lang="fr"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v8.1.1 <https://hydejack.com/>
-->











<head>
  



<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta http-equiv="x-ua-compatible" content="ie=edge">


  
<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Minitel | 3615Yéyé Corp</title>
<meta name="generator" content="Jekyll v3.8.3" />
<meta property="og:title" content="Minitel" />
<meta name="author" content="Ronan Le Pivaingt" />
<meta property="og:locale" content="fr" />
<meta name="description" content="This chapter shows how to upgrade Hydejack to a newer version. The method depends on how you’ve installed Hydejack." />
<meta property="og:description" content="This chapter shows how to upgrade Hydejack to a newer version. The method depends on how you’ve installed Hydejack." />
<link rel="canonical" href="http://0.0.0.0:4000/projets/minitel/" />
<meta property="og:url" content="http://0.0.0.0:4000/projets/minitel/" />
<meta property="og:site_name" content="3615Yéyé Corp" />
<script type="application/ld+json">
{"@type":"WebPage","headline":"Minitel","url":"http://0.0.0.0:4000/projets/minitel/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:4000/assets/img/AvatarDoYouBuzz.jpg"},"name":"Ronan Le Pivaingt"},"author":{"@type":"Person","name":"Ronan Le Pivaingt"},"description":"This chapter shows how to upgrade Hydejack to a newer version. The method depends on how you’ve installed Hydejack.","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  

  


<meta name="mobile-web-app-capable" content="yes">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="3615Yéyé Corp">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<meta name="application-name" content="3615Yéyé Corp">
<meta name="msapplication-config" content="/assets/ieconfig.xml">


<meta name="theme-color" content="rgb(25,55,71)">


<meta name="generator" content="Hydejack v8.1.1" />

<link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/feed.xml" title="3615Yéyé Corp" />



<link rel="alternate" href="http://0.0.0.0:4000/projets/minitel/" hreflang="fr">

<link rel="shortcut icon" href="/assets/icons/favicon.ico">
<link rel="apple-touch-icon" href="/assets/icons/icon.png">

<link rel="manifest" href="/assets/manifest.json">


  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">




<link rel="dns-prefetch" href="/" id="_baseURL">
<link rel="dns-prefetch" href="/assets/js/hydejack-8.1.1.js" id="_hrefJS">
<link rel="dns-prefetch" href="/sw.js" id="_hrefSW">
<link rel="dns-prefetch" href="/assets/bower_components/fontfaceobserver/fontfaceobserver.standalone.js" id="_hrefFFO">
<link rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.js" id="_hrefKatexJS">
<link rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.css" id="_hrefKatexCSS">
<link rel="dns-prefetch" href="/assets/img/swipe.svg" id="_hrefSwipeSVG">




<script>!function(e,t){"use strict";function n(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}e.loadJS=function(e,r){var o=t.createElement("script");o.src=e,r&&n(o,"load",r,{once:!0});var a=t.scripts[0];return a.parentNode.insertBefore(o,a),o},e._loaded=!1,e.loadJSDeferred=function(r,o){function a(){e._loaded=!0,o&&n(d,"load",o,{once:!0});var r=t.scripts[0];r.parentNode.insertBefore(d,r)}var d=t.createElement("script");return d.src=r,e._loaded?a():n(e,"load",a,{once:!0}),d},e.setRel=e.setRelStylesheet=function(e){function n(){this.rel="stylesheet"}var r=t.getElementById(e);r.addEventListener?r.addEventListener("load",n,{once:!0}):r.onload=n}}(window,document);
!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);
!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);
</script>

<script>!function(w, d) {
    w._noPushState = false;
    w._noDrawer = false;

    /**/
    loadJS(d.getElementById('_hrefFFO').href, function() {
      if ('Promise' in w) Promise.all([
        new FontFaceObserver('Noto Sans').load(),
        new FontFaceObserver('Roboto Slab').load(),
      ]).then(function f() { d.body.classList.add('font-active'); }, function() {});
    });
    /**/
}(window, document);</script>

<!--[if gt IE 8]><!---->








  <link rel="stylesheet" href="/assets/css/hydejack-8.1.1.css">
  <link rel="stylesheet" href="/assets/icomoon/style.css">
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:400|Noto+Sans:400,400i,700,700i">
    <noscript>
      <style>
        html { font-family: Noto Sans, Helvetica, Arial, sans-serif!important; }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: Roboto Slab, Helvetica, Arial, sans-serif!important; }
      </style>
    </noscript>
  


<style id="_pageStyle">
.content a:not(.btn){color:#4fb1ba;border-color:rgba(79,177,186,0.2)}.content a:not(.btn):hover{border-color:#4fb1ba}:focus{outline-color:#4fb1ba !important}.btn-primary{color:#fff;background-color:#4fb1ba;border-color:#4fb1ba}.btn-primary:focus,.btn-primary.focus,.form-control:focus,.form-control.focus{box-shadow:0 0 0 3px rgba(79,177,186,0.5)}.btn-primary:hover,.btn-primary.hover{color:#fff;background-color:#409ba3;border-color:#409ba3}.btn-primary:disabled,.btn-primary.disabled{color:#fff;background-color:#4fb1ba;border-color:#4fb1ba}.btn-primary:active,.btn-primary.active{color:#fff;background-color:#409ba3;border-color:#409ba3}::selection{color:#fff;background:#4fb1ba}::-moz-selection{color:#fff;background:#4fb1ba}

</style>

<!--<![endif]-->




</head>

<body>
  <div id="_navbar" class="navbar fixed-top">
  <div class="content">
    <div class="nav-btn-bar">
      <span class="sr-only">Jump to:</span>
      <a id="_menu" class="nav-btn no-hover fl" href="#_navigation">
        <span class="sr-only">Navigation</span>
        <span class="icon-menu"></span>
      </a>
    </div>
  </div>
</div>
<hr class="sr-only" hidden />


<hy-push-state
  replace-ids="_main"
  link-selector="a[href]:not([href*='/assets/']):not(.external):not(.no-push-state)"
  duration="250"
  script-selector="script:not([type^='math/tex'])"
  prefetch
>
  
    <main
  id="_main"
  class="content fade-in layout-page"
  role="main"
  data-color="rgb(79,177,186)"
  data-theme-color="rgb(25,55,71)"
  
    data-image="/assets/img/Minitel_Front.jpg"
    data-overlay
  
  >
  <article class="page" role="article">
  <header>
    <h1 class="page-title">Minitel</h1>
    



  
    <div class="hr pb0"></div>
  


  </header>

  
<p><strong>En cours de rédaction.</strong></p>

<p>Le Minitel est de retour pour contrôler une Raspberry Pi avec son clavier et son écran.</p>

<p>
  <hy-img root-margin="512px"  src="/assets/img/Minitel_Side.jpg" alt="Alt text" >
    <noscript><img data-ignore  src="/assets/img/Minitel_Side.jpg" alt="Alt text" /></noscript>
    <span class="loading" slot="loading" hidden>
      <span class="icon-cog"></span>
    </span>
  </hy-img></p>

<p>Un grand merci aux différentes personnes qui ont partagé au fil des années leurs expérimentations et succès dans l’utilisation du Minitel avec une Raspberry. Voici les deux principales sources qui m’ont permises d’y arriver :</p>

<ul>
  <li>blog.uggy.fr, <a href="http://blog.uggy.org/?post/2015/02/22/Minitel-et-Raspberry">cet article en particulier</a></li>
  <li>Le blog de Pila, <a href="http://pila.fr/wordpress/?p=425">cet article en particulier</a></li>
</ul>

<p>=&gt; Adaptation à la dernière Raspbian et des essais avec les dernières possibilitées de la Raspberry modèle 3</p>

<p>Sommaire :</p>

<ol class="no_toc" id="markdown-toc">
  <li><a href="#pré-requis" id="markdown-toc-pré-requis">Pré-requis</a></li>
  <li><a href="#hardware" id="markdown-toc-hardware">Hardware</a>    <ol>
      <li><a href="#test" id="markdown-toc-test">Test</a></li>
    </ol>
  </li>
  <li><a href="#software" id="markdown-toc-software">Software</a></li>
</ol>

<h2 id="pré-requis">Pré-requis</h2>

<ul>
  <li>Un minitel avec une fiche DIN</li>
  <li>Adaptateur USB</li>
  <li>A raspberry with raspbian</li>
</ul>

<h2 id="hardware">Hardware</h2>

<p>Matériel nécessaire :</p>

<ul>
  <li>Un convertisseur USB / série PL2303</li>
  <li>Une fiche DIN à 5 broches</li>
  <li>Cables électriques similaire à ceux utilisé dans les montages Arduino</li>
  <li>Un fer à souder pour fixer les cables à la fiche DIN</li>
</ul>

<p>Le blog d’Uggy décrit comment lier les 3 cables du convertisseur USB / série à la fiche DIN : <a href="http://blog.uggy.org/?post/2015/02/22/Minitel-et-Raspberry">dans cet article</a></p>

<h3 id="test">Test</h3>

<p>Identifier l’IP de la raspberry et s’y connecter.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ping raspberrypi.local

ssh 192.168.1.10
</code></pre></div></div>

<p>Valider la liaison Raspberry Pi &lt;-&gt; Minitel et identifier le périphérique série qui commence par tty, ici ttyUSB0 :</p>

<p>Allumer le Minitel :</p>

<ul>
  <li>Fnct + T puis A pour activer le videotext</li>
  <li>Fnct + T puis E désactive l’écho local</li>
  <li>Fnct + P puis 4 pour régler la vitesse de transmission série à 4800 bauds</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># La commande suivante doit afficher quelques carrés blanc sur le Minitel</span>
<span class="nb">echo</span> <span class="s1">'Test affichage minitel'</span> <span class="o">&gt;</span> /dev/ttyUSB0
</code></pre></div></div>

<p>[Photo du résultat d’un echo]</p>

<h2 id="software">Software</h2>

<p>Création du service systemd qui proposera un login au Minitel :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Création du service :</span>

<span class="nb">sudo </span>vim /etc/systemd/system/serial-getty-minitel@.service
    <span class="c">#  This file is part of systemd.</span>
    <span class="c">#</span>
    <span class="c">#  systemd is free software; you can redistribute it and/or modify it</span>
    <span class="c">#  under the terms of the GNU Lesser General Public License as published by</span>
    <span class="c">#  the Free Software Foundation; either version 2.1 of the License, or</span>
    <span class="c">#  (at your option) any later version.</span>

    <span class="o">[</span>Unit]
    <span class="nv">Description</span><span class="o">=</span>Serial Getty on %I
    <span class="nv">Documentation</span><span class="o">=</span>man:agetty<span class="o">(</span>8<span class="o">)</span> man:systemd-getty-generator<span class="o">(</span>8<span class="o">)</span>
    <span class="nv">Documentation</span><span class="o">=</span>http://0pointer.de/blog/projects/serial-console.html
    <span class="nv">BindsTo</span><span class="o">=</span>dev-%i.device
    <span class="nv">After</span><span class="o">=</span>dev-%i.device systemd-user-sessions.service
    <span class="nv">After</span><span class="o">=</span>rc-local.service

    <span class="c"># If additional gettys are spawned during boot then we should make</span>
    <span class="c"># sure that this is synchronized before getty.target, even though</span>
    <span class="c"># getty.target didn't actually pull it in.</span>
    <span class="nv">Before</span><span class="o">=</span>getty.target
    <span class="nv">IgnoreOnIsolate</span><span class="o">=</span><span class="nb">yes</span>

    <span class="o">[</span>Service]
    <span class="nv">ExecStart</span><span class="o">=</span>-/sbin/getty <span class="nt">-L</span> <span class="nt">-i</span> <span class="nt">-I</span> <span class="s2">"</span><span class="se">\0</span><span class="s2">33</span><span class="se">\1</span><span class="s2">43"</span> %i 4800 minitel1b-80
    <span class="nv">Type</span><span class="o">=</span>idle
    <span class="nv">Restart</span><span class="o">=</span>always
    <span class="nv">UtmpIdentifier</span><span class="o">=</span>%I
    <span class="nv">TTYPath</span><span class="o">=</span>/dev/%I
    <span class="nv">TTYReset</span><span class="o">=</span><span class="nb">yes
    </span><span class="nv">TTYVHangup</span><span class="o">=</span><span class="nb">yes
    </span><span class="nv">KillMode</span><span class="o">=</span>process
    <span class="nv">IgnoreSIGPIPE</span><span class="o">=</span>no
    <span class="nv">SendSIGHUP</span><span class="o">=</span><span class="nb">yes</span>

    <span class="o">[</span>Install]
    <span class="nv">WantedBy</span><span class="o">=</span>getty.target

<span class="c"># Mise à disposition du service pour l'interface série précédemment identifiée :</span>
<span class="nb">sudo ln</span> <span class="nt">-s</span> /etc/systemd/system/serial-getty-minitel@.service /etc/systemd/system/getty.target.wants/serial-getty-minitel@ttyUSB0.service
</code></pre></div></div>

<p>Redémarrer systemd pour la prise en compte du nouveau service</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl daemon-reload

<span class="c"># Activer le nouveau service :</span>
<span class="nb">sudo </span>systemctl <span class="nb">enable </span>serial-getty-minitel@ttyUSB0.service

<span class="nb">sudo </span>systemctl start serial-getty-minitel@ttyUSB0.service
</code></pre></div></div>

<p>Le prompt de login apparait sur le Minitel et c’est parti !</p>

</article>

  

  
<footer role="contentinfo">
  <hr/>
  
    <p><small class="copyright">© 2018. All rights reserved. Open <code class="highlighter-rouge">_config.yml</code> to edit this text.
</small></p>
  
  
  <p><small>Powered by <a class="external" href="https://hydejack.com/">Hydejack</a> v<span id="_version">8.1.1</span></small></p>
  <hr class="sr-only"/>
</footer>


</main>

    <hy-drawer
  class=""
  align="left"
  threshold="10"
  touch-events
  prevent-default
>
  <header id="_sidebar" class="sidebar" role="banner">
    
    <div class="sidebar-bg sidebar-overlay" style="background-color:rgb(25,55,71);background-image:url(/assets/img/Minitel_Front.jpg)"></div>

    <div class="sidebar-sticky">
      <div class="sidebar-about">
        
          <a class="no-hover" href="/" tabindex="-1">
            <img src="/assets/img/AvatarDoYouBuzz.jpg" class="avatar" alt="3615Yéyé Corp" data-ignore />
          </a>
        
        <h2 class="h1"><a href="/">3615Yéyé Corp</a></h2>
        
        
          <p class="fine">
            Bonjour je m’appelle Ronan.<br />
Je suis développeur web et j’accompagne la mise en place et l’évolution de votre site.

          </p>
        
      </div>

      <nav class="sidebar-nav heading" role="navigation">
        <span class="sr-only">Navigation:</span>
<ul>
  
  
  
  
    
      <li>
        <a
          id="_navigation"
          href="/quisuisje/"
          class="sidebar-nav-item"
          
          >
          Qui suis-je
        </a>
      </li>
    
  
    
      <li>
        <a
          
          href="/projets/"
          class="sidebar-nav-item active"
          
          >
          Projets
        </a>
      </li>
    
  
    
      <li>
        <a
          
          href="/mecontacter/"
          class="sidebar-nav-item"
          
          >
          Me contacter
        </a>
      </li>
    
  
</ul>

      </nav>

      

      <div class="sidebar-social">
        <span class="sr-only">Social:</span>
<ul>
  
    
      



  

  
  
  
  

  

  

  <li>
    <a href="https://github.com/3615Yeye" title="GitHub" class="no-mark-external">
      <span class="icon-github"></span>
      <span class="sr-only">GitHub</span>
    </a>
  </li>


    
      



  

  
  
  
  

  

  

  <li>
    <a href="mailto:r.lepivaingt@gmail.com" title="Email" class="no-mark-external">
      <span class="icon-mail"></span>
      <span class="sr-only">Email</span>
    </a>
  </li>


    
      



  

  
  
  
  

  

  

  <li>
    <a href="https://www.linkedin.com/in/ronan-le-pivaingt-3615yeye/" title="LinkedIn" class="no-mark-external">
      <span class="icon-linkedin2"></span>
      <span class="sr-only">LinkedIn</span>
    </a>
  </li>


    
  
</ul>

      </div>
    </div>
  </header>
</hy-drawer>
<hr class="sr-only" hidden />

  
</hy-push-state>


  <script>!function(w, d) {
    var h = new Date().getHours();
    var m = h <= 6 || h >= 18 ? 'add' : 'remove';
    d.body.classList[m]('dark-mode');
  }(window, document);</script>



  <!--[if !IE]><!---->
  <script>loadJSDeferred(document.getElementById('_hrefJS').href);</script>
  

  <!--<![endif]-->

  


  <script>
    if ('serviceWorker' in navigator) {
      
        navigator.serviceWorker.getRegistration()
          .then(r => r.unregister())
          .catch(() => {});
      
    }
  </script>






<h2 class="sr-only" hidden>Templates (for web app):</h2>

<template id="_animation-template" hidden>
  <div class="animation-main fixed-top">
    <div class="content">
      <div class="page"></div>
    </div>
  </div>
</template>

<template id="_loading-template" hidden>
  <div class="loading nav-btn fr">
    <span class="sr-only">Loading…</span>
    <span class="icon-cog"></span>
  </div>
</template>

<template id="_error-template" hidden>
  <div class="page">
    <h1 class="page-title">Error</h1>
    
    
    <p class="lead">
      Sorry, an error occurred while loading <a class="this-link" href=""></a>.

    </p>
  </div>
</template>

<template id="_back-template" hidden>
  <a id="_back" class="back nav-btn fl no-hover">
    <span class="sr-only">Back</span>
    <span class="icon-arrow-left2"></span>
  </a>
</template>

<template id="_permalink-template" hidden>
  <a href="#" class="permalink">
    <span class="sr-only">Permalink</span>
    <span class="icon-link"></span>
  </a>
</template>




</body>
</html>
